<div class="container-fluid">
    <div class="body-report">
        <div class="row">
            <div class="col-12">
                <div class="row">
                    <div class="col-12 col-sm-12 col-md-12 col-lg-6 col-xl-6 col-xxl-6 mb-2 d-flex align-items-center">
                        <img class="img-report" src="assets/img/report.png">
                        <h5 class="text-tpp ms-2 mb-0">Report</h5>
                    </div>
                    <div class="col-12 col-sm-12 col-md-12 col-lg-6 col-xl-6 col-xxl-6 mb-2">
                        <div class="d-flex align-items-center ps-3 ms-3">
                            <div
                                class="form-group has-search me-2 ms-auto d-none d-sm-none d-md-none d-lg-block d-xl-block d-xxl-block">
                                <span class="fa fa-search form-control-feedback"></span>
                                <input style="border-radius: 6px;" type="text" class="form-control" placeholder="Search"
                                    [(ngModel)]="filterOption.filterSearch" (keyup.enter)="searchData()">
                            </div>
                            <button type="button"
                                class="btn btn-outline-green me-2 d-flex align-items-center border-radius-6px"
                                (click)="openFilterReportModal()">
                                <i class='bx bx-filter-alt me-1'></i> Filter
                            </button>
                            <button type="button"
                                class="btn btn-outline-grey me-2 d-flex align-items-center border-radius-6px"
                                (click)="exportReportList()">
                                <i class='bx bx-upload me-1'></i> Export
                            </button>
                            <button type="button"
                                class="btn btn-outline-sky d-flex align-items-center border-radius-6px"
                                (click)="resetFilterReport()">
                                <i class='bx bx-reset me-1'></i> Reset
                            </button>
                        </div>
                    </div>
                    <div class="col-12 d-block d-sm-block d-md-block d-lg-none d-xl-none d-xxl-none mb-2">
                        <div class="form-group has-search">
                            <span class="fa fa-search form-control-feedback"></span>
                            <input style="border-radius: 6px;" type="text" class="form-control" placeholder="Search"
                                [(ngModel)]="filterOption.filterSearch" (keyup.enter)="searchData()">
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-12rounded-pill mt-2 mb-3">
                <div class="w-100 line-cut"></div>
            </div>
        </div>
        <div class="body-report-table p-3">
            <div class="row">
                <div class="col-12">
                    <div style="overflow-x:auto;">
                        <table class="table table-bordered table-report">
                            <thead>
                                <tr class="text-center header-table">
                                    <th scope="col">
                                        <div class="d-flex justify-content-center">
                                            <span class="me-1">Regions</span>
                                            <a class="text-body d-flex align-items-center"><i
                                                    class='font-size-3 bx bx-sort-down'></i></a>
                                        </div>
                                    </th>
                                    <th scope="col">
                                        <div class="d-flex justify-content-center">
                                            <span class="me-1">Provinces</span>
                                            <a class="text-body d-flex align-items-center"><i
                                                    class='font-size-3 bx bx-sort-down'></i></a>
                                        </div>
                                    </th>
                                    <th scope="col">
                                        <div class="d-flex justify-content-center">
                                            <span class="me-1">Sites</span>
                                            <a class="text-body d-flex align-items-center"><i class='font-size-3 bx bx-sort-down'></i></a>
                                        </div>
                                    </th>
                                    <th scope="col">
                                        <div class="d-flex justify-content-center">
                                            <span class="me-1">Pi No.</span>
                                            <a class="text-body d-flex align-items-center"><i class='font-size-3 bx bx-sort-down'></i></a>
                                        </div>
                                    </th>
                                    <th scope="col">
                                        <div class="d-flex justify-content-center">
                                            <span class="me-1">Battery No.</span>
                                            <a class="text-body d-flex align-items-center"><i class='font-size-3 bx bx-sort-down'></i></a>
                                        </div>
                                    </th>
                                    <th scope="col">
                                        <div class="d-flex justify-content-center">
                                            <span class="me-1">Date/Time</span>
                                            <a class="text-body d-flex align-items-center"><i
                                                    class='font-size-3 bx bx-sort-down'></i></a>
                                        </div>
                                    </th>
                                    <th scope="col">
                                        <div class="d-flex justify-content-center">
                                            <span class="me-1">Pack no.</span>
                                            <a class="text-body d-flex align-items-center"><i
                                                    class='font-size-3 bx bx-sort-down'></i></a>
                                        </div>
                                    </th>
                                    <th scope="col">
                                        <div class="d-flex justify-content-center">
                                            <span class="me-1">BMS S/N</span>
                                            <a class="text-body d-flex align-items-center"><i
                                                    class='font-size-3 bx bx-sort-down'></i></a>
                                        </div>
                                    </th>
                                    <th scope="col">
                                        <div class="d-flex justify-content-center">
                                            <span class="me-1">Pack S/N</span>
                                            <a class="text-body d-flex align-items-center"><i
                                                    class='font-size-3 bx bx-sort-down'></i></a>
                                        </div>
                                    </th>
                                    <th scope="col">
                                        <div class="d-flex justify-content-center">
                                            <span class="me-1">Pack Current(A)</span>
                                            <a class="text-body d-flex align-items-center"><i
                                                    class='font-size-3 bx bx-sort-down'></i></a>
                                        </div>
                                    </th>
                                    <th scope="col">
                                        <div class="d-flex justify-content-center">
                                            <span class="me-1">Pack Voltage(V)</span>
                                            <a class="text-body d-flex align-items-center"><i
                                                    class='font-size-3 bx bx-sort-down'></i></a>
                                        </div>
                                    </th>
                                    <th scope="col">
                                        <div class="d-flex justify-content-center">
                                            <span class="me-1">RemainCapacity(AH)</span>
                                            <a class="text-body d-flex align-items-center"><i
                                                    class='font-size-3 bx bx-sort-down'></i></a>
                                        </div>
                                    </th>
                                    <th scope="col">
                                        <div class="d-flex justify-content-center">
                                            <span class="me-1">FullCapacity(AH)</span>
                                            <a class="text-body d-flex align-items-center"><i
                                                    class='font-size-3 bx bx-sort-down'></i></a>
                                        </div>
                                    </th>
                                    <th scope="col">
                                        <div class="d-flex justify-content-center">
                                            <span class="me-1">MaxVolt(mV)</span>
                                            <a class="text-body d-flex align-items-center"><i
                                                    class='font-size-3 bx bx-sort-down'></i></a>
                                        </div>
                                    </th>
                                    <th scope="col">
                                        <div class="d-flex justify-content-center">
                                            <span class="me-1">MimVolt(mV)</span>
                                            <a class="text-body d-flex align-items-center"><i
                                                    class='font-size-3 bx bx-sort-down'></i></a>
                                        </div>
                                    </th>
                                    <th scope="col">
                                        <div class="d-flex justify-content-center">
                                            <span class="me-1">Alarm Type</span>
                                            <a class="text-body d-flex align-items-center"><i
                                                    class='font-size-3 bx bx-sort-down'></i></a>
                                        </div>
                                    </th>
                                    <th scope="col">
                                        <div class="d-flex justify-content-center">
                                            <span class="me-1">Protect Type</span>
                                            <a class="text-body d-flex align-items-center"><i
                                                    class='font-size-3 bx bx-sort-down'></i></a>
                                        </div>
                                    </th>
                                    <th scope="col">
                                        <div class="d-flex justify-content-center">
                                            <span class="me-1">Fault Type</span>
                                            <a class="text-body d-flex align-items-center"><i
                                                    class='font-size-3 bx bx-sort-down'></i></a>
                                        </div>
                                    </th>
                                    <th scope="col">
                                        <div class="d-flex justify-content-center">
                                            <span class="me-1">Vcell 1(mV)</span>
                                            <a class="text-body d-flex align-items-center"><i
                                                    class='font-size-3 bx bx-sort-down'></i></a>
                                        </div>
                                    </th>
                                    <th scope="col">
                                        <div class="d-flex justify-content-center">
                                            <span class="me-1">Vcell 2(mV)</span>
                                            <a class="text-body d-flex align-items-center"><i
                                                    class='font-size-3 bx bx-sort-down'></i></a>
                                        </div>
                                    </th>
                                    <th scope="col">
                                        <div class="d-flex justify-content-center">
                                            <span class="me-1">Vcell 3(mV)</span>
                                            <a class="text-body d-flex align-items-center"><i
                                                    class='font-size-3 bx bx-sort-down'></i></a>
                                        </div>
                                    </th>
                                    <th scope="col">
                                        <div class="d-flex justify-content-center">
                                            <span class="me-1">Vcell 4(mV)</span>
                                            <a class="text-body d-flex align-items-center"><i
                                                    class='font-size-3 bx bx-sort-down'></i></a>
                                        </div>
                                    </th>
                                    <th scope="col">
                                        <div class="d-flex justify-content-center">
                                            <span class="me-1">Vcell 5(mV)</span>
                                            <a class="text-body d-flex align-items-center"><i
                                                    class='font-size-3 bx bx-sort-down'></i></a>
                                        </div>
                                    </th>
                                    <th scope="col">
                                        <div class="d-flex justify-content-center">
                                            <span class="me-1">Vcell 6(mV)</span>
                                            <a class="text-body d-flex align-items-center"><i
                                                    class='font-size-3 bx bx-sort-down'></i></a>
                                        </div>
                                    </th>
                                    <th scope="col">
                                        <div class="d-flex justify-content-center">
                                            <span class="me-1">Vcell 7(mV)</span>
                                            <a class="text-body d-flex align-items-center"><i
                                                    class='font-size-3 bx bx-sort-down'></i></a>
                                        </div>
                                    </th>
                                    <th scope="col">
                                        <div class="d-flex justify-content-center">
                                            <span class="me-1">Vcell 8(mV)</span>
                                            <a class="text-body d-flex align-items-center"><i
                                                    class='font-size-3 bx bx-sort-down'></i></a>
                                        </div>
                                    </th>
                                    <th scope="col">
                                        <div class="d-flex justify-content-center">
                                            <span class="me-1">Vcell 9(mV)</span>
                                            <a class="text-body d-flex align-items-center"><i
                                                    class='font-size-3 bx bx-sort-down'></i></a>
                                        </div>
                                    </th>
                                    <th scope="col">
                                        <div class="d-flex justify-content-center">
                                            <span class="me-1">Vcell 10(mV)</span>
                                            <a class="text-body d-flex align-items-center"><i
                                                    class='font-size-3 bx bx-sort-down'></i></a>
                                        </div>
                                    </th>
                                    <th scope="col">
                                        <div class="d-flex justify-content-center">
                                            <span class="me-1">Vcell 11(mV)</span>
                                            <a class="text-body d-flex align-items-center"><i
                                                    class='font-size-3 bx bx-sort-down'></i></a>
                                        </div>
                                    </th>
                                    <th scope="col">
                                        <div class="d-flex justify-content-center">
                                            <span class="me-1">Vcell 12(mV)</span>
                                            <a class="text-body d-flex align-items-center"><i
                                                    class='font-size-3 bx bx-sort-down'></i></a>
                                        </div>
                                    </th>
                                    <th scope="col">
                                        <div class="d-flex justify-content-center">
                                            <span class="me-1">Vcell 13(mV)</span>
                                            <a class="text-body d-flex align-items-center"><i
                                                    class='font-size-3 bx bx-sort-down'></i></a>
                                        </div>
                                    </th>
                                    <th scope="col">
                                        <div class="d-flex justify-content-center">
                                            <span class="me-1">Vcell 14(mV)</span>
                                            <a class="text-body d-flex align-items-center"><i
                                                    class='font-size-3 bx bx-sort-down'></i></a>
                                        </div>
                                    </th>
                                    <th scope="col">
                                        <div class="d-flex justify-content-center">
                                            <span class="me-1">Vcell 15(mV)</span>
                                            <a class="text-body d-flex align-items-center"><i
                                                    class='font-size-3 bx bx-sort-down'></i></a>
                                        </div>
                                    </th>
                                    <th scope="col">
                                        <div class="d-flex justify-content-center">
                                            <span class="me-1">Tcell 1(°C)</span>
                                            <a class="text-body d-flex align-items-center"><i
                                                    class='font-size-3 bx bx-sort-down'></i></a>
                                        </div>
                                    </th>
                                    <th scope="col">
                                        <div class="d-flex justify-content-center">
                                            <span class="me-1">Tcell 2(°C)</span>
                                            <a class="text-body d-flex align-items-center"><i
                                                    class='font-size-3 bx bx-sort-down'></i></a>
                                        </div>
                                    </th>
                                    <th scope="col">
                                        <div class="d-flex justify-content-center">
                                            <span class="me-1">Tcell 3(°C)</span>
                                            <a class="text-body d-flex align-items-center"><i
                                                    class='font-size-3 bx bx-sort-down'></i></a>
                                        </div>
                                    </th>
                                    <th scope="col">
                                        <div class="d-flex justify-content-center">
                                            <span class="me-1">Tcell 4(°C)</span>
                                            <a class="text-body d-flex align-items-center"><i
                                                    class='font-size-3 bx bx-sort-down'></i></a>
                                        </div>
                                    </th>
                                    <th scope="col">
                                        <div class="d-flex justify-content-center">
                                            <span class="me-1">MOS_T(°C)</span>
                                            <a class="text-body d-flex align-items-center"><i
                                                    class='font-size-3 bx bx-sort-down'></i></a>
                                        </div>
                                    </th>
                                    <th scope="col">
                                        <div class="d-flex justify-content-center">
                                            <span class="me-1">ENV_T(°C)</span>
                                            <a class="text-body d-flex align-items-center"><i
                                                    class='font-size-3 bx bx-sort-down'></i></a>
                                        </div>
                                    </th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr class="text-tpp" *ngFor="let report of reportList;let index = index"
                                    [ngClass]="{'tr-odd': index%2}">
                                    <td class="text-center">{{report.regionName}}</td>
                                    <td class="text-center">{{report.provinceName}}</td>
                                    <td class="text-center">{{report.siteName}}</td>
                                    <td class="text-center">{{report.piSn}}</td>
                                    <td class="text-center">{{report.batteryNo}}</td>
                                    <td class="text-center">{{report.dateTime}}</td>
                                    <td class="text-center">{{report.packNo}}</td>
                                    <td class="text-center">{{report.bmsSn}}</td>
                                    <td class="text-center">{{report.packSn}}</td>
                                    <td class="text-center">{{report.packCurrent}}</td>
                                    <td class="text-center">{{report.packVoltage}}</td>
                                    <td class="text-center">{{report.remainCapacity}}</td>
                                    <td class="text-center">{{report.fullCapacity}}</td>
                                    <td class="text-center">{{report.maxVolt}}</td>
                                    <td class="text-center">{{report.minVolt}}</td>
                                    <td class="text-center">{{report.alarmType}}</td>
                                    <td class="text-center">{{report.protectType}}</td>
                                    <td class="text-center">{{report.faultType}}</td>
                                    <td class="text-center">{{report.vcell1}}</td>
                                    <td class="text-center">{{report.vcell2}}</td>
                                    <td class="text-center">{{report.vcell3}}</td>
                                    <td class="text-center">{{report.vcell4}}</td>
                                    <td class="text-center">{{report.vcell5}}</td>
                                    <td class="text-center">{{report.vcell6}}</td>
                                    <td class="text-center">{{report.vcell7}}</td>
                                    <td class="text-center">{{report.vcell8}}</td>
                                    <td class="text-center">{{report.vcell9}}</td>
                                    <td class="text-center">{{report.vcell10}}</td>
                                    <td class="text-center">{{report.vcell11}}</td>
                                    <td class="text-center">{{report.vcell12}}</td>
                                    <td class="text-center">{{report.vcell13}}</td>
                                    <td class="text-center">{{report.vcell14}}</td>
                                    <td class="text-center">{{report.vcell15}}</td>
                                    <td class="text-center">{{report.tcell1}}</td>
                                    <td class="text-center">{{report.tcell2}}</td>
                                    <td class="text-center">{{report.tcell3}}</td>
                                    <td class="text-center">{{report.tcell4}}</td>
                                    <td class="text-center">{{report.mosT}}</td>
                                    <td class="text-center">{{report.envT}}</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            <div class="row mt-3">
                <div class="col-6 d-flex justify-content-start align-items-center">
                    <strong class="me-2">Rows per page</strong>
                    <select style="width: 70px;" class="form-select me-2" [(ngModel)]="filterOption.limit"
                        (change)="searchData()">
                        <option value="10">10</option>
                        <option value="20">20</option>
                        <option value="30">30</option>
                        <option value="40">40</option>
                        <option value="50">50</option>
                    </select>
                    <strong class="d-none d-sm-none d-md-none d-lg-block d-xl-block d-xxl-block">Showing 10 - 20 of
                        results
                        {{filterOption.recordTotal}}</strong>
                </div>
                <div class="col-6">
                    <div class="rounded-pill d-flex group-ptt float-end">
                        <div><a class="font-size-3 text-light w-100 float-start pt-1" (click)="goPage(-1)"><i
                                    class='bx bx-left-arrow-alt ms-2'></i></a>
                        </div>
                        <div class="font-size-2 w-100 text-center text-light pt-1">{{filterOption.page}} of
                            {{filterOption.pageTotal}}</div>
                        <div><a class="font-size-3 text-light w-100 float-end pt-1" (click)="goPage(1)"><i
                                    class='bx bx-right-arrow-alt me-2'></i></a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Filter Report -->
<div class="modal fade" id="filterReportModal" tabindex="-1" aria-labelledby="filterReportModalLabel"
    aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-lg modal-fullscreen-lg-down">
        <div class="modal-content border-radius-12px">
            <div class="modal-header">
                <h5 class="modal-title" id="filterReportModalLabel"><strong class="text-tpp">Filter Report</strong></h5>
                <a data-bs-dismiss="modal" aria-label="Close"><i class='text-tpp font-size-5 bx bxs-x-circle'></i></a>
            </div>
            <div class="modal-body bg-modal-body">
                <div class="row">
                    <div class="col-12 border-bottom">
                        <h5 class="text-tpp"><strong>Location</strong></h5>
                    </div>
                    <div class="col-12 p-3">
                        <div class="row">
                            <div class="col-12 col-sm-12 col-md-12 col-lg-6 col-xl-6 col-xxl-6">
                                <label for="inputRegions" class="form-label text-tpp"><strong>Regions :</strong></label>
                                <select class="form-select" id="inputRegions" aria-label="Please select"
                                    [(ngModel)]="filterOption.regionId" (change)="onSelectRegion()">
                                    <option selected value="">Please select</option>
                                    <option value="{{region.regionId}}" *ngFor="let region of regionList">
                                        {{region.regionName}}</option>
                                </select>
                            </div>
                            <div class="col-12 col-sm-12 col-md-12 col-lg-6 col-xl-6 col-xxl-6">
                                <label for="inputPiNo" class="form-label text-tpp"><strong>Pi No. :</strong></label>
                                <select class="form-select" id="inputPiNo" aria-label="Please select"
                                    [disabled]="!filterOption.siteId" [(ngModel)]="filterOption.piId"
                                    (change)="onSelectPi()">
                                    <option selected value="">Please select</option>
                                    <option value="{{pi.piId}}" *ngFor="let pi of piList">
                                        {{pi.piSn}}</option>
                                </select>
                            </div>
                            <div class="col-12 col-sm-12 col-md-12 col-lg-6 col-xl-6 col-xxl-6 mt-2">
                                <label for="inputProvinces" class="form-label text-tpp"><strong>Provinces
                                        :</strong></label>
                                <select class="form-select" id="inputProvinces" aria-label="Please select"
                                    [disabled]="!filterOption.regionId" [(ngModel)]="filterOption.provinceId"
                                    (change)="onSelectProvince()">
                                    <option selected value="">Please select</option>
                                    <option value="{{province.provinceId}}" *ngFor="let province of provinceList">
                                        {{province.provinceName}}</option>
                                </select>
                            </div>
                            <div class="col-12 col-sm-12 col-md-12 col-lg-6 col-xl-6 col-xxl-6 mt-2">
                                <label for="inputBatteryNo" class="form-label text-tpp"><strong>Battery No.
                                        :</strong></label>
                                <select class="form-select" id="inputBatteryNo" aria-label="Please select"
                                    [disabled]="!filterOption.piId" [(ngModel)]="filterOption.batteryId">
                                    <option selected value="">Please select</option>
                                    <option value="{{battery.batteryId}}" *ngFor="let battery of batteryList">
                                        {{battery.batteryNo}}</option>
                                </select>
                            </div>
                            <div class="col-12 col-sm-12 col-md-12 col-lg-6 col-xl-6 col-xxl-6 mt-2">
                                <label for="inputSites" class="form-label text-tpp"><strong>Sites :</strong></label>
                                <select class="form-select" id="inputSites" aria-label="Please select"
                                    [disabled]="!filterOption.provinceId" [(ngModel)]="filterOption.siteId"
                                    (change)="onSelectSite()">
                                    <option selected value="">Please select</option>
                                    <option value="{{site.siteId}}" *ngFor="let site of siteList">
                                        {{site.siteName}}</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row mt-3">
                    <div class="col-12 border-bottom">
                        <h5 class="text-tpp"><strong>Data Range</strong></h5>
                    </div>
                    <div class="col-12 p-3">
                        <div class="row">
                            <div class="col-12 col-sm-12 col-md-12 col-lg-6 col-xl-6 col-xxl-6">
                                <div class="row">
                                    <div class="col-12">
                                        <label for="inputStartAt" class="form-label text-tpp"><strong>Start At
                                                :</strong></label>
                                    </div>
                                    <div class="col-5">
                                        <input type="date" class="form-control" id="inputStartAt"
                                            [(ngModel)]="filterOption.startDate">
                                    </div>
                                    <div class="col-2 text-center">
                                        <i class='bx bx-chevron-right fs-1'></i>
                                    </div>
                                    <div class="col-5">
                                        <input type="date" class="form-control" id="inputEndAt"
                                            [(ngModel)]="filterOption.endDate">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer d-flex justify-content-center">
                <button style="width: 95px;" type="button" class="btn btn-outline-grey rounded-pill me-4"
                    data-bs-dismiss="modal">Cancel</button>
                <button style="width: 95px;" type="button" class="btn btn-outline-blue rounded-pill"
                    data-bs-dismiss="modal" (click)="searchData()">Save</button>
            </div>
        </div>
    </div>
</div>

<!-- Modal -->
<div class="modal fade" id="loadingModal" tabindex="-1" aria-labelledby="loadingModalLabel" data-bs-backdrop="static">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-body">
                <div class="progress w-100">
                    <div class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar"
                        aria-valuenow="75" aria-valuemin="0" aria-valuemax="100" style="width: 75%"></div>
                </div>
            </div>
        </div>
    </div>
</div>
